{
  "version": 3,
  "sources": ["../../../src/knowledgeBase.ts", "../../../src/index.ts", "../../../../node_modules/wrangler/templates/middleware/middleware-ensure-req-body-drained.ts", "../../../../node_modules/wrangler/templates/middleware/middleware-miniflare3-json-error.ts", "../bundle-TJc3sm/middleware-insertion-facade.js", "../../../../node_modules/wrangler/templates/middleware/common.ts", "../bundle-TJc3sm/middleware-loader.entry.ts"],
  "sourceRoot": "/Users/saikrishna/Documents/git/safetyforwomen/backend/.wrangler/tmp/dev-VVwCEg",
  "sourcesContent": ["export type KnowledgeDoc = {\n  id: string;\n  title: string;\n  url: string;\n  content: string;\n};\n\nexport const KNOWLEDGE_BASE: KnowledgeDoc[] = [\n  {\n    id: \"home-hero\",\n    title: \"Home Hero: One Voice, One Mission\",\n    url: \"/\",\n    content:\n      \"Safety for Women Movement presents a pan-India collaborative mission for a nation where every woman is safe. The homepage headline is 'One Voice, One Mission' with the subtitle 'A Safer India for Women' and a call to join the movement.\",\n  },\n  {\n    id: \"home-description\",\n    title: \"Home Mission Statement\",\n    url: \"/\",\n    content:\n      \"The movement invites people to turn hope into action: join a unified community that builds practical solutions so no woman is left without help.\",\n  },\n  {\n    id: \"about-story\",\n    title: \"About the Movement\",\n    url: \"/about\",\n    content:\n      \"Born from the urgent need for change after tragic gender-based violence incidents, Safety for Women transforms distress into meaningful action. It unites citizens, communities, law enforcement, and policymakers to focus on practical solutions, collaboration, and sustainable impact.\",\n  },\n  {\n    id: \"about-vision\",\n    title: \"Vision\",\n    url: \"/about\",\n    content:\n      \"The vision is to change the narrative that India is unsafe for women by taking everyday, practical steps to make streets, homes, workplaces, and public spaces safer.\",\n  },\n  {\n    id: \"about-mission\",\n    title: \"Mission\",\n    url: \"/about\",\n    content:\n      \"The mission is to turn fear, anger, and frustration into concrete action, focus on what can change today, and work on simple local solutions that can be repeated across India.\",\n  },\n  {\n    id: \"about-values\",\n    title: \"Values\",\n    url: \"/about\",\n    content:\n      \"Values include being non-political, non-religious, and non-partisan. Real change comes from direct action, collaboration, and community ownership.\",\n  },\n  {\n    id: \"about-your-role\",\n    title: \"Your Role\",\n    url: \"/about\",\n    content:\n      \"Everyone has something to offer: time, skills, contacts, or lived experience. Join a team, lead small actions locally, and help rewrite the story of India into a nation that is aware, prepared, and united for safety.\",\n  },\n  {\n    id: \"about-plan\",\n    title: \"The Plan\",\n    url: \"/about\",\n    content:\n      \"The plan is to build teams in every state and union territory, bring together doers who are ready to act, and connect people who can contribute time, skills, networks, or resources to clear initiatives.\",\n  },\n  {\n    id: \"initiatives-overview\",\n    title: \"Our Initiatives Overview\",\n    url: \"/#initiatives\",\n    content:\n      \"The movement runs nine initiatives to empower communities, engage stakeholders, and create safer environments for women across India.\",\n  },\n  {\n    id: \"initiative-awareness-programs\",\n    title: \"Initiative 1: Safety Awareness Programs\",\n    url: \"/#initiatives\",\n    content:\n      \"Workshops in schools, colleges, workplaces, and residential communities. Topics include self-defense, legal rights, and emergency safety protocols. Request form: https://bit.ly/SFW-AwarenessProgramQuestionaire\",\n  },\n  {\n    id: \"initiative-tech\",\n    title: \"Initiative 2: Tech Solutions for Safety\",\n    url: \"/#initiatives\",\n    content:\n      \"Leverages technology for safety through community safety maps, hackathons, and collaboration with tech companies to build safety-focused products. Street safety audit form: https://forms.gle/zgPLDgGwxYYPYavo9\",\n  },\n  {\n    id: \"initiative-sss\",\n    title: \"Initiative 3: Survivor Support System (SSS) - India\",\n    url: \"/#initiatives\",\n    content:\n      \"Builds a unified, verified, collaborative network of NGOs, legal experts, counsellors, shelters, crisis responders, volunteers, and health professionals. Join the network: https://bit.ly/SFW-PanIndia-SurvivorSupportSystem\",\n  },\n  {\n    id: \"initiative-well-lit\",\n    title: \"Initiative 4: Safe & Well-Lit Communities\",\n    url: \"/#initiatives\",\n    content:\n      \"Focuses on safety audits, fixing broken streetlights, installing new lighting, and sustainable funding with CSR partners. Goal: Zero Dark Spots. Audit form: https://docs.google.com/forms/d/e/1FAIpQLSdmdG5Kf2_tsrb8KyGlFHbdhJVnrwUzxzZZFCwq2zhd4nehBg/viewform?usp=preview\",\n  },\n  {\n    id: \"initiative-citizen-police\",\n    title: \"Initiative 5: Citizen Police Alliance Team\",\n    url: \"/#initiatives\",\n    content:\n      \"Transforms passive reporting into active partnership, trains citizens, and offers Command Centre tours to understand modern policing. Tour request form: https://forms.gle/ayvdScjcJLjTCAANA. WhatsApp group: https://chat.whatsapp.com/BVmXh5pO3DuD2LPCwxsncr\",\n  },\n  {\n    id: \"initiative-safety-squadrons\",\n    title: \"Initiative 6: Network of Street-wise Safety Squadrons\",\n    url: \"/#initiatives\",\n    content:\n      \"Future roadmap initiative to create last-mile volunteer squads that assist neighborhoods, respond to safety concerns, and ensure no woman is left helpless.\",\n  },\n  {\n    id: \"initiative-school-curriculum\",\n    title: \"Initiative 7: Safety Education into School Curriculum\",\n    url: \"/#initiatives\",\n    content:\n      \"Future roadmap initiative to integrate safety, laws, respect, and consent into school curricula. Collaborates with education experts and seeks institutional partners.\",\n  },\n  {\n    id: \"initiative-women-livelihood\",\n    title: \"Initiative 8: Women Empowerment & Livelihood\",\n    url: \"/#initiatives\",\n    content:\n      \"Future roadmap initiative to support skill training, financial literacy, and employment. Seeks corporate partners, vocational training institutes, and mentors.\",\n  },\n  {\n    id: \"initiative-awards\",\n    title: \"Initiative 9: Annual Safety Recognition Awards\",\n    url: \"/#initiatives\",\n    content:\n      \"Future roadmap initiative to establish awards that recognize Safety Champions and celebrate best practices across India. Seeks sponsors and patronage.\",\n  },\n  {\n    id: \"join-section\",\n    title: \"Join the Movement Section\",\n    url: \"/get-involved\",\n    content:\n      \"The Join section invites people to take the safety pledge and receive a Certificate of Commitment. The call to action is 'Let's Act for Women's Safety. Together.'\",\n  },\n  {\n    id: \"get-involved-overview\",\n    title: \"Get Involved: Overview\",\n    url: \"/get-involved\",\n    content:\n      \"The Join The Movement page lists six ways to contribute: take the safety pledge, request an awareness program, become a volunteer, partner with the movement, audit street safety, or join the Survivor Support System.\",\n  },\n  {\n    id: \"get-involved-pledge\",\n    title: \"Get Involved: Take the Safety Pledge\",\n    url: \"/get-involved\",\n    content:\n      \"Submit your name, 10-digit mobile number, 6-digit pin code, and state to take the pledge and download a certificate. The pledge submission is stored via the API.\",\n  },\n  {\n    id: \"get-involved-awareness\",\n    title: \"Get Involved: Request an Awareness Program\",\n    url: \"/get-involved\",\n    content:\n      \"Request programs for schools, colleges, organizations, or communities. Form link: https://docs.google.com/forms/d/e/1FAIpQLSe8qqs23o94pBGpib1APpzrNaU9NRhCk4vrzDFHnltjuAKKIQ/viewform\",\n  },\n  {\n    id: \"get-involved-volunteer\",\n    title: \"Get Involved: Become a Volunteer\",\n    url: \"/get-involved\",\n    content:\n      \"Volunteer remotely or on-ground based on your skills and time. Form link: https://docs.google.com/forms/d/e/1FAIpQLSdqzAMP1VKX1S0NbQK24R9EaO7jqOdSbq1DWz_p78ugd_8yKw/viewform\",\n  },\n  {\n    id: \"get-involved-partner\",\n    title: \"Get Involved: Partner With Us\",\n    url: \"/get-involved\",\n    content:\n      \"Partner to amplify impact and create systemic change. Form link: https://docs.google.com/forms/d/e/1FAIpQLSeH9SZu6loQT4irZowzBIHJZl_SFc10JGsD6fFClXJ6cWQXcQ/viewform\",\n  },\n  {\n    id: \"get-involved-audit\",\n    title: \"Get Involved: Audit Your Street's Safety\",\n    url: \"/get-involved\",\n    content:\n      \"Identify and report safety concerns in your neighborhood. Form link: https://docs.google.com/forms/d/e/1FAIpQLScx666YVpXuUUZUUJGqDEfClxmHn9fM48Fmdmbkd_sqD8e_IA/viewform\",\n  },\n  {\n    id: \"get-involved-sss\",\n    title: \"Get Involved: Join the National Survivor Support System\",\n    url: \"/get-involved\",\n    content:\n      \"Join the Survivor Support System (SSS) network for healing, empowerment, and justice. Form link: https://docs.google.com/forms/d/1h0AZLB5OkGn8oBA0aFLJKr4r9gjK56rXCaRPUjZ6_xE/viewform?edit_requested=true\",\n  },\n  {\n    id: \"impact-stats\",\n    title: \"Impact: Movement by the Numbers\",\n    url: \"/impact\",\n    content:\n      \"Impact highlights: 1,375 community members, 139 volunteers, 26 programs held, 4,000 lives touched, 4,500 pledges taken, and 2,240 Karnataka State Police (KSP) app downloads.\",\n  },\n  {\n    id: \"impact-ksp-app\",\n    title: \"Impact: Karnataka State Police App\",\n    url: \"/impact\",\n    content:\n      \"The KSP Mobile App is the official Karnataka State Police app. Android: https://play.google.com/store/apps/details?id=com.capulustech.ksppqrs. iOS: https://apps.apple.com/in/app/karnataka-state-police/id1358964762\",\n  },\n  {\n    id: \"resources-overview\",\n    title: \"Resources: Knowledge & Support\",\n    url: \"/resources\",\n    content:\n      \"Resources provide safety information, skills, and access to support networks, including survivor support, apps, devices, safety tips, and self-defense demos.\",\n  },\n  {\n    id: \"resources-survivor-support\",\n    title: \"Resources: Survivor Support Network\",\n    url: \"/resources\",\n    content:\n      \"Key resources include the National Commission for Women (https://www.ncw.gov.in/), Women's Helpline 181 (tel:181), and a Local NGO Directory entry.\",\n  },\n  {\n    id: \"resources-safety-apps\",\n    title: \"Resources: Safety Apps\",\n    url: \"/resources\",\n    content:\n      \"Recommended apps include Himmat Plus (Delhi Police app), My Safetipin (area safety scores), and SHOUT (emergency responder network).\",\n  },\n  {\n    id: \"resources-safety-devices\",\n    title: \"Resources: Safety Devices\",\n    url: \"/resources\",\n    content:\n      \"Modern safety devices include smart jewelry with SOS buttons, personal alarms, and GPS trackers.\",\n  },\n  {\n    id: \"resources-safety-tips-teens\",\n    title: \"Resources: Safety Tips for Teens\",\n    url: \"/resources\",\n    content:\n      \"Tips for teens: Trust your instincts; share live location with trusted contacts when traveling alone.\",\n  },\n  {\n    id: \"resources-safety-tips-adults\",\n    title: \"Resources: Safety Tips for Adults\",\n    url: \"/resources\",\n    content:\n      \"Tips for adults: Be aware of surroundings and avoid distractions; have keys ready and check your car before entering.\",\n  },\n  {\n    id: \"resources-safety-tips-seniors\",\n    title: \"Resources: Safety Tips for Seniors\",\n    url: \"/resources\",\n    content:\n      \"Tips for seniors: Avoid scams and verify requests for information; keep doors and windows locked and verify visitors.\",\n  },\n  {\n    id: \"resources-self-defense-demos\",\n    title: \"Resources: Self-Defense Demos\",\n    url: \"/resources\",\n    content:\n      \"Self-defense demos include Basic Escape Techniques, Situational Awareness, and Defensive Stance. The section is marked as 'will be available soon.'\",\n  },\n  {\n    id: \"events-media-overview\",\n    title: \"Events & Media Overview\",\n    url: \"/events-media\",\n    content:\n      \"Events & Media highlights safety awareness programs, Safe & Well-Lit Communities work, collaboration events, and photo galleries of programs across institutions and communities.\",\n  },\n  {\n    id: \"events-media-upcoming\",\n    title: \"Events & Media: Upcoming Event\",\n    url: \"/events-media\",\n    content:\n      \"Upcoming event placeholder: Awareness Program. Time 11:00am-12.30pm, venue 'Location', with details to be announced.\",\n  },\n  {\n    id: \"events-media-collaborations\",\n    title: \"Events & Media: Collaborations\",\n    url: \"/events-media\",\n    content:\n      \"Collaborations include Police Departments, State Women Commission, and strategic meetings with institutional partners, civil society, and community leaders.\",\n  },\n  {\n    id: \"events-media-timeline\",\n    title: \"Events & Media: Awareness Program Timeline\",\n    url: \"/events-media\",\n    content:\n      \"Awareness program timeline includes events at Cambridge Institute of Technology (3 Oct 2024), SHVNM Government Girls PU College (19 Oct 2024), St. Joseph's Institute of Management (27 Oct 2024), multiple Sparsh Hospitals (Nov 2024-Feb 2025), Gopalan College (Dec 2024, Sep 2025), National Public School (5 Dec 2024), Ibblur Government School (30 Jan 2025), Vayah Vikas (31 Jan 2025), St. Joseph's University (1 Feb 2025), Arya Vidhya Shala (8 Feb 2025), Rotaract Lakshmibai College (20 Feb 2025), Christ College (1 Mar 2025), TVS Hosur (11 Mar 2025), Keerti Riveria Apartments (15 Mar 2025), a 'Be the Light' panel discussion (23 Mar 2025), Mphasis online (28 Mar 2025), Ashvasan senior citizens (18 Apr 2025), St. Francis PU College (1 Jul 2025), Tata Electronics (24 Jul 2025), and Fortis Hospital programs (6-7 Oct 2025).\",\n  },\n  {\n    id: \"events-media-panelists\",\n    title: \"Events & Media: Be the Light Panel\",\n    url: \"/events-media\",\n    content:\n      \"Panel discussion with Arun Pai (Bangalore Walks), Baishaki (Axis Bank), Vikram Rai (Bangalore Apartment Federation), Priyanka Upendra (cine actor), Snehal (BBMP East), Pushpa S (BESCOM), and Poornima Shetty (Founder, Safety for Women Foundation). Moderator: Nithya Mandhyam (Times of India).\",\n  },\n  {\n    id: \"blog-overview\",\n    title: \"Blog Overview\",\n    url: \"/blog\",\n    content:\n      \"The blog shares stories, insights, and updates on women's safety and empowerment. Contributors can write to teamsafetyforwomen@gmail.com.\",\n  },\n  {\n    id: \"blog-post-safe-streets\",\n    title: \"Blog: Safe Streets, Safe Workplaces, Safe India\",\n    url: \"/blog/safe-streets-safe-workplaces-safe-india-protecting-women-in-a-changing-world\",\n    content:\n      \"Article by Abdul Shakeeb (5 min read) on women's safety in India, with statistics, workplace safety, public space safety, and action steps such as education, legal reform, support systems, and community vigilance.\",\n  },\n  {\n    id: \"blog-post-finding-my-voice\",\n    title: \"Blog: Finding My Voice\",\n    url: \"/blog/finding-my-voice\",\n    content:\n      \"Article by Dr. Varsha Pillai (4 min read) describing a survivor's experience, the importance of speaking up, and the need for education, family conversations, reporting, mentorship, and advocacy.\",\n  },\n  {\n    id: \"faq-overview\",\n    title: \"FAQ Summary\",\n    url: \"/faq\",\n    content:\n      \"FAQ covers who the movement is, why it is pan-India, initiative focus, volunteer-driven model, no subscription fees, and how to contact the team at safetyforwomen@gmail.com. It notes collaboration with Bengaluru Police and Parihar.\",\n  },\n  {\n    id: \"faq-key-points\",\n    title: \"FAQ Key Points\",\n    url: \"/faq\",\n    content:\n      \"Key answers: founded September 1, 2024; open to everyone; men and boys are encouraged to join; services are volunteer-driven with no payment; the movement is pan-India; victims are referred to NGOs and relevant authorities.\",\n  },\n  {\n    id: \"privacy-policy\",\n    title: \"Privacy Policy\",\n    url: \"/privacy-policy\",\n    content:\n      \"Privacy policy for Safety for Women (powered by Iron Feather Foundation) aligns with India's Digital Personal Data Protection Act 2023. It explains data collected (name, phone, email, location, participation), handling of sensitive SSS data, purposes, consent, sharing only with verified partners, data retention, security practices, and grievance contact at reach@safetyforwomen.org.\",\n  },\n  {\n    id: \"terms-conditions\",\n    title: \"Terms & Conditions\",\n    url: \"/terms-conditions\",\n    content:\n      \"Terms include intellectual property rights, restrictions on reuse, a license for user content, no warranties, limitation of liability, and a contact email for questions at safetyforwomen@gmail.com.\",\n  },\n  {\n    id: \"un-sdgs\",\n    title: \"UN SDG Alignment\",\n    url: \"/\",\n    content:\n      \"Safety for Women aligns with UN SDGs including Goal 3, 4, 5, 11, 16, and 17. Each goal is linked to the official UN SDG page.\",\n  },\n  {\n    id: \"newsletter\",\n    title: \"Newsletter and Contact Cards\",\n    url: \"/\",\n    content:\n      \"Newsletter invites users to subscribe for updates and provides contact email teamsafetyforwomen@gmail.com and social follow options.\",\n  },\n  {\n    id: \"header-nav\",\n    title: \"Navigation Links\",\n    url: \"/\",\n    content:\n      \"Primary navigation includes Home, About Us, Our Initiatives, Our Impact, Resources, Events & Media, Join Us, Blog, and FAQ. A call button is provided to dial 112 on mobile.\",\n  },\n  {\n    id: \"footer-contact\",\n    title: \"Footer Contacts and Socials\",\n    url: \"/\",\n    content:\n      \"Footer provides social links: Facebook, X (Twitter), LinkedIn, YouTube, Instagram, Telegram, WhatsApp, and email teamsafetyforwomen@gmail.com. It includes Privacy Policy and Terms & Conditions links.\",\n  },\n];\n", "import { KNOWLEDGE_BASE, type KnowledgeDoc } from \"./knowledgeBase\";\n\nexport interface Env {\n  DB: D1Database;\n}\n\ntype ChatRequest = {\n  message?: string;\n};\n\ntype ChatSource = {\n  title: string;\n  url: string;\n};\n\ntype ChatResponse = {\n  answer: string;\n  sources: ChatSource[];\n};\n\nconst STOP_WORDS = new Set([\n  \"a\",\n  \"an\",\n  \"and\",\n  \"are\",\n  \"as\",\n  \"at\",\n  \"be\",\n  \"but\",\n  \"by\",\n  \"for\",\n  \"from\",\n  \"has\",\n  \"have\",\n  \"in\",\n  \"is\",\n  \"it\",\n  \"its\",\n  \"of\",\n  \"on\",\n  \"or\",\n  \"that\",\n  \"the\",\n  \"their\",\n  \"there\",\n  \"this\",\n  \"to\",\n  \"was\",\n  \"were\",\n  \"with\",\n  \"you\",\n  \"your\",\n]);\n\nconst tokenize = (text: string) =>\n  text\n    .toLowerCase()\n    .replace(/[^a-z0-9\\s]/g, \" \")\n    .split(/\\s+/)\n    .filter(Boolean)\n    .filter((token) => !STOP_WORDS.has(token));\n\nconst buildDocVectors = (docs: KnowledgeDoc[]) => {\n  const tokenized = docs.map((doc) => tokenize(`${doc.title} ${doc.content}`));\n  const docCount = docs.length;\n  const df = new Map<string, number>();\n\n  tokenized.forEach((tokens) => {\n    const unique = new Set(tokens);\n    unique.forEach((token) => {\n      df.set(token, (df.get(token) ?? 0) + 1);\n    });\n  });\n\n  const idf = (token: string) => Math.log((docCount + 1) / ((df.get(token) ?? 0) + 1)) + 1;\n\n  return docs.map((doc, index) => {\n    const tf = new Map<string, number>();\n    tokenized[index].forEach((token) => {\n      tf.set(token, (tf.get(token) ?? 0) + 1);\n    });\n\n    const weights = new Map<string, number>();\n    let norm = 0;\n    tf.forEach((count, token) => {\n      const weight = (1 + Math.log(count)) * idf(token);\n      weights.set(token, weight);\n      norm += weight * weight;\n    });\n\n    return {\n      doc,\n      weights,\n      norm: Math.sqrt(norm),\n    };\n  });\n};\n\nconst DOC_VECTORS = buildDocVectors(KNOWLEDGE_BASE);\n\nconst rankDocuments = (query: string) => {\n  const queryTokens = tokenize(query);\n  if (queryTokens.length === 0) {\n    return [];\n  }\n\n  const tf = new Map<string, number>();\n  queryTokens.forEach((token) => {\n    tf.set(token, (tf.get(token) ?? 0) + 1);\n  });\n\n  const queryWeights = new Map<string, number>();\n  let queryNorm = 0;\n  tf.forEach((count, token) => {\n    const weight = 1 + Math.log(count);\n    queryWeights.set(token, weight);\n    queryNorm += weight * weight;\n  });\n\n  queryNorm = Math.sqrt(queryNorm);\n  if (queryNorm === 0) {\n    return [];\n  }\n\n  return DOC_VECTORS.map((vector) => {\n    let dot = 0;\n    queryWeights.forEach((weight, token) => {\n      const docWeight = vector.weights.get(token);\n      if (docWeight) {\n        dot += weight * docWeight;\n      }\n    });\n\n    const score = vector.norm > 0 ? dot / (vector.norm * queryNorm) : 0;\n    return { doc: vector.doc, score };\n  })\n    .filter((match) => match.score > 0)\n    .sort((a, b) => b.score - a.score);\n};\n\nconst buildSnippet = (content: string) => {\n  const sentences = content.split(\". \");\n  if (sentences.length <= 2) {\n    return content;\n  }\n  return `${sentences.slice(0, 2).join(\". \")}.`;\n};\n\nconst buildChatResponse = (matches: { doc: KnowledgeDoc; score: number }[], query: string): ChatResponse => {\n  if (matches.length === 0 || matches[0].score < 0.08) {\n    return {\n      answer:\n        \"I can only answer questions based on Safety for Women website content, and I could not find a good match for that yet. Try asking about the movement, initiatives, how to get involved, or contact details.\",\n      sources: [],\n    };\n  }\n\n  const topMatches = matches.slice(0, 3);\n  const snippets = topMatches\n    .map((match) => `- ${match.doc.title}: ${buildSnippet(match.doc.content)}`)\n    .join(\"\\n\");\n\n  return {\n    answer: `Here is what I found on the site about \"${query}\":\\n${snippets}`,\n    sources: topMatches.map((match) => ({ title: match.doc.title, url: match.doc.url })),\n  };\n};\n\nexport default {\n  async fetch(request: Request, env: Env, ctx: ExecutionContext): Promise<Response> {\n    const corsHeaders = {\n      \"Access-Control-Allow-Origin\": \"*\",\n      \"Access-Control-Allow-Methods\": \"POST, OPTIONS\",\n      \"Access-Control-Allow-Headers\": \"Content-Type\",\n    };\n\n    if (request.method === \"OPTIONS\") {\n      return new Response(null, {\n        headers: corsHeaders,\n      });\n    }\n\n    if (request.method !== \"POST\") {\n      return new Response(\"Method Not Allowed\", { status: 405, headers: corsHeaders });\n    }\n\n    const url = new URL(request.url);\n    if (url.pathname === \"/api/pledge\") {\n      try {\n        const data = await request.json() as any;\n        const { name, mobileNumber, pinCode, state } = data;\n\n        if (!name || !mobileNumber || !pinCode || !state) {\n          return new Response(JSON.stringify({ error: \"Missing required fields\" }), {\n            status: 400,\n            headers: { ...corsHeaders, \"Content-Type\": \"application/json\" },\n          });\n        }\n\n        const query = `\n          INSERT INTO pledge (\"Name\", \"Mobile Number\", \"Pin code\", \"State\")\n          VALUES (?, ?, ?, ?)\n        `;\n\n        const { success } = await env.DB.prepare(query)\n          .bind(name, mobileNumber, pinCode, state)\n          .run();\n\n        if (success) {\n          return new Response(JSON.stringify({ message: \"Pledge submitted successfully\" }), {\n            status: 201,\n            headers: { ...corsHeaders, \"Content-Type\": \"application/json\" },\n          });\n        } else {\n          throw new Error(\"Failed to insert into database\");\n        }\n      } catch (err) {\n        console.error(err);\n        return new Response(JSON.stringify({ error: \"Internal Server Error\" }), {\n          status: 500,\n          headers: { ...corsHeaders, \"Content-Type\": \"application/json\" },\n        });\n      }\n    }\n\n    if (url.pathname === \"/api/chat\") {\n      try {\n        const data = (await request.json()) as ChatRequest;\n        const message = data?.message?.toString().trim();\n\n        if (!message) {\n          return new Response(JSON.stringify({ error: \"Message is required\" }), {\n            status: 400,\n            headers: { ...corsHeaders, \"Content-Type\": \"application/json\" },\n          });\n        }\n\n        const matches = rankDocuments(message);\n        const response = buildChatResponse(matches, message);\n\n        return new Response(JSON.stringify(response), {\n          status: 200,\n          headers: { ...corsHeaders, \"Content-Type\": \"application/json\" },\n        });\n      } catch (err) {\n        console.error(err);\n        return new Response(JSON.stringify({ error: \"Internal Server Error\" }), {\n          status: 500,\n          headers: { ...corsHeaders, \"Content-Type\": \"application/json\" },\n        });\n      }\n    }\n\n    return new Response(\"Not Found\", { status: 404, headers: corsHeaders });\n  },\n};\n", "import type { Middleware } from \"./common\";\n\nconst drainBody: Middleware = async (request, env, _ctx, middlewareCtx) => {\n\ttry {\n\t\treturn await middlewareCtx.next(request, env);\n\t} finally {\n\t\ttry {\n\t\t\tif (request.body !== null && !request.bodyUsed) {\n\t\t\t\tconst reader = request.body.getReader();\n\t\t\t\twhile (!(await reader.read()).done) {}\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.error(\"Failed to drain the unused request body.\", e);\n\t\t}\n\t}\n};\n\nexport default drainBody;\n", "import type { Middleware } from \"./common\";\n\ninterface JsonError {\n\tmessage?: string;\n\tname?: string;\n\tstack?: string;\n\tcause?: JsonError;\n}\n\nfunction reduceError(e: any): JsonError {\n\treturn {\n\t\tname: e?.name,\n\t\tmessage: e?.message ?? String(e),\n\t\tstack: e?.stack,\n\t\tcause: e?.cause === undefined ? undefined : reduceError(e.cause),\n\t};\n}\n\n// See comment in `bundle.ts` for details on why this is needed\nconst jsonError: Middleware = async (request, env, _ctx, middlewareCtx) => {\n\ttry {\n\t\treturn await middlewareCtx.next(request, env);\n\t} catch (e: any) {\n\t\tconst error = reduceError(e);\n\t\treturn Response.json(error, {\n\t\t\tstatus: 500,\n\t\t\theaders: { \"MF-Experimental-Error-Stack\": \"true\" },\n\t\t});\n\t}\n};\n\nexport default jsonError;\n", "\t\t\t\timport worker, * as OTHER_EXPORTS from \"/Users/saikrishna/Documents/git/safetyforwomen/backend/src/index.ts\";\n\t\t\t\timport * as __MIDDLEWARE_0__ from \"/Users/saikrishna/Documents/git/safetyforwomen/node_modules/wrangler/templates/middleware/middleware-ensure-req-body-drained.ts\";\nimport * as __MIDDLEWARE_1__ from \"/Users/saikrishna/Documents/git/safetyforwomen/node_modules/wrangler/templates/middleware/middleware-miniflare3-json-error.ts\";\n\n\t\t\t\texport * from \"/Users/saikrishna/Documents/git/safetyforwomen/backend/src/index.ts\";\n\t\t\t\tconst MIDDLEWARE_TEST_INJECT = \"__INJECT_FOR_TESTING_WRANGLER_MIDDLEWARE__\";\n\t\t\t\texport const __INTERNAL_WRANGLER_MIDDLEWARE__ = [\n\t\t\t\t\t\n\t\t\t\t\t__MIDDLEWARE_0__.default,__MIDDLEWARE_1__.default\n\t\t\t\t]\n\t\t\t\texport default worker;", "export type Awaitable<T> = T | Promise<T>;\n// TODO: allow dispatching more events?\nexport type Dispatcher = (\n\ttype: \"scheduled\",\n\tinit: { cron?: string }\n) => Awaitable<void>;\n\nexport type IncomingRequest = Request<\n\tunknown,\n\tIncomingRequestCfProperties<unknown>\n>;\n\nexport interface MiddlewareContext {\n\tdispatch: Dispatcher;\n\tnext(request: IncomingRequest, env: any): Awaitable<Response>;\n}\n\nexport type Middleware = (\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tmiddlewareCtx: MiddlewareContext\n) => Awaitable<Response>;\n\nconst __facade_middleware__: Middleware[] = [];\n\n// The register functions allow for the insertion of one or many middleware,\n// We register internal middleware first in the stack, but have no way of controlling\n// the order that addMiddleware is run in service workers so need an internal function.\nexport function __facade_register__(...args: (Middleware | Middleware[])[]) {\n\t__facade_middleware__.push(...args.flat());\n}\nexport function __facade_registerInternal__(\n\t...args: (Middleware | Middleware[])[]\n) {\n\t__facade_middleware__.unshift(...args.flat());\n}\n\nfunction __facade_invokeChain__(\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tdispatch: Dispatcher,\n\tmiddlewareChain: Middleware[]\n): Awaitable<Response> {\n\tconst [head, ...tail] = middlewareChain;\n\tconst middlewareCtx: MiddlewareContext = {\n\t\tdispatch,\n\t\tnext(newRequest, newEnv) {\n\t\t\treturn __facade_invokeChain__(newRequest, newEnv, ctx, dispatch, tail);\n\t\t},\n\t};\n\treturn head(request, env, ctx, middlewareCtx);\n}\n\nexport function __facade_invoke__(\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tdispatch: Dispatcher,\n\tfinalMiddleware: Middleware\n): Awaitable<Response> {\n\treturn __facade_invokeChain__(request, env, ctx, dispatch, [\n\t\t...__facade_middleware__,\n\t\tfinalMiddleware,\n\t]);\n}\n", "// This loads all middlewares exposed on the middleware object and then starts\n// the invocation chain. The big idea is that we can add these to the middleware\n// export dynamically through wrangler, or we can potentially let users directly\n// add them as a sort of \"plugin\" system.\n\nimport ENTRY, { __INTERNAL_WRANGLER_MIDDLEWARE__ } from \"/Users/saikrishna/Documents/git/safetyforwomen/backend/.wrangler/tmp/bundle-TJc3sm/middleware-insertion-facade.js\";\nimport { __facade_invoke__, __facade_register__, Dispatcher } from \"/Users/saikrishna/Documents/git/safetyforwomen/node_modules/wrangler/templates/middleware/common.ts\";\nimport type { WorkerEntrypointConstructor } from \"/Users/saikrishna/Documents/git/safetyforwomen/backend/.wrangler/tmp/bundle-TJc3sm/middleware-insertion-facade.js\";\n\n// Preserve all the exports from the worker\nexport * from \"/Users/saikrishna/Documents/git/safetyforwomen/backend/.wrangler/tmp/bundle-TJc3sm/middleware-insertion-facade.js\";\n\nclass __Facade_ScheduledController__ implements ScheduledController {\n\treadonly #noRetry: ScheduledController[\"noRetry\"];\n\n\tconstructor(\n\t\treadonly scheduledTime: number,\n\t\treadonly cron: string,\n\t\tnoRetry: ScheduledController[\"noRetry\"]\n\t) {\n\t\tthis.#noRetry = noRetry;\n\t}\n\n\tnoRetry() {\n\t\tif (!(this instanceof __Facade_ScheduledController__)) {\n\t\t\tthrow new TypeError(\"Illegal invocation\");\n\t\t}\n\t\t// Need to call native method immediately in case uncaught error thrown\n\t\tthis.#noRetry();\n\t}\n}\n\nfunction wrapExportedHandler(worker: ExportedHandler): ExportedHandler {\n\t// If we don't have any middleware defined, just return the handler as is\n\tif (\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__ === undefined ||\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__.length === 0\n\t) {\n\t\treturn worker;\n\t}\n\t// Otherwise, register all middleware once\n\tfor (const middleware of __INTERNAL_WRANGLER_MIDDLEWARE__) {\n\t\t__facade_register__(middleware);\n\t}\n\n\tconst fetchDispatcher: ExportedHandlerFetchHandler = function (\n\t\trequest,\n\t\tenv,\n\t\tctx\n\t) {\n\t\tif (worker.fetch === undefined) {\n\t\t\tthrow new Error(\"Handler does not export a fetch() function.\");\n\t\t}\n\t\treturn worker.fetch(request, env, ctx);\n\t};\n\n\treturn {\n\t\t...worker,\n\t\tfetch(request, env, ctx) {\n\t\t\tconst dispatcher: Dispatcher = function (type, init) {\n\t\t\t\tif (type === \"scheduled\" && worker.scheduled !== undefined) {\n\t\t\t\t\tconst controller = new __Facade_ScheduledController__(\n\t\t\t\t\t\tDate.now(),\n\t\t\t\t\t\tinit.cron ?? \"\",\n\t\t\t\t\t\t() => {}\n\t\t\t\t\t);\n\t\t\t\t\treturn worker.scheduled(controller, env, ctx);\n\t\t\t\t}\n\t\t\t};\n\t\t\treturn __facade_invoke__(request, env, ctx, dispatcher, fetchDispatcher);\n\t\t},\n\t};\n}\n\nfunction wrapWorkerEntrypoint(\n\tklass: WorkerEntrypointConstructor\n): WorkerEntrypointConstructor {\n\t// If we don't have any middleware defined, just return the handler as is\n\tif (\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__ === undefined ||\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__.length === 0\n\t) {\n\t\treturn klass;\n\t}\n\t// Otherwise, register all middleware once\n\tfor (const middleware of __INTERNAL_WRANGLER_MIDDLEWARE__) {\n\t\t__facade_register__(middleware);\n\t}\n\n\t// `extend`ing `klass` here so other RPC methods remain callable\n\treturn class extends klass {\n\t\t#fetchDispatcher: ExportedHandlerFetchHandler<Record<string, unknown>> = (\n\t\t\trequest,\n\t\t\tenv,\n\t\t\tctx\n\t\t) => {\n\t\t\tthis.env = env;\n\t\t\tthis.ctx = ctx;\n\t\t\tif (super.fetch === undefined) {\n\t\t\t\tthrow new Error(\"Entrypoint class does not define a fetch() function.\");\n\t\t\t}\n\t\t\treturn super.fetch(request);\n\t\t};\n\n\t\t#dispatcher: Dispatcher = (type, init) => {\n\t\t\tif (type === \"scheduled\" && super.scheduled !== undefined) {\n\t\t\t\tconst controller = new __Facade_ScheduledController__(\n\t\t\t\t\tDate.now(),\n\t\t\t\t\tinit.cron ?? \"\",\n\t\t\t\t\t() => {}\n\t\t\t\t);\n\t\t\t\treturn super.scheduled(controller);\n\t\t\t}\n\t\t};\n\n\t\tfetch(request: Request<unknown, IncomingRequestCfProperties>) {\n\t\t\treturn __facade_invoke__(\n\t\t\t\trequest,\n\t\t\t\tthis.env,\n\t\t\t\tthis.ctx,\n\t\t\t\tthis.#dispatcher,\n\t\t\t\tthis.#fetchDispatcher\n\t\t\t);\n\t\t}\n\t};\n}\n\nlet WRAPPED_ENTRY: ExportedHandler | WorkerEntrypointConstructor | undefined;\nif (typeof ENTRY === \"object\") {\n\tWRAPPED_ENTRY = wrapExportedHandler(ENTRY);\n} else if (typeof ENTRY === \"function\") {\n\tWRAPPED_ENTRY = wrapWorkerEntrypoint(ENTRY);\n}\nexport default WRAPPED_ENTRY;\n"],
  "mappings": "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",
  "names": []
}
